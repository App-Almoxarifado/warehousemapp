<div class="container mt-2">
    <h3>Novo Produto</h3>
    <hr>
    {{#each erros}}
    <div class="alert alert-danger">{{texto}}</div>
    {{else}}

    {{/each}}

    <form action="/products/add_id" class="mt-2" enctype="multipart/form-data" method="POST">
        <div class="row no-gutters position-relative">
            <div class="col-md-4 position-static">
                <div class="d-flex justify-content-center">
                    <img src="{{product.image}}" class="avatar img-fluid rounded" alt="" style="width: 10rem;">
                </div>
                <div class="d-flex p-1 justify-content-center">

                    <input type="file" accept="image/*" name="file" id="file"
                        class="btn-file text-center center-block file-upload">
                </div>
            </div>

            <div class="col-md-4 position-static px-2">
                <div class="form-row">
                    <input type="hidden" class="form-control form-control-sm" id="id" name="id" placeholder="Id"
                        value="{{product._id}}">
                    <input type="hidden" class="form-control mt-2" name="image" id="image">
                    <div class="form-group col-12 col-md-12">
                        <label style="font-size: small ;" for="group">Grupo:</label>
                        <select class=" custom-select custom-select-sm" id="group" name="group"
                            value="{{product.group}}" onblur="viewCertificate(), statusCalibration()" required
                            autofocus>
                            <option selected disabled value="">Selecione...</option>
                            {{#each groups}}
                            <option {{#if_eq ../product.group _id}}selected{{/if_eq}} value="{{_id}}">{{description}}
                            </option>
                            {{description}}
                            </option>
                            {{else}}
                            <option value="0">Nenhum group registrado</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group col-12 col-md-12">
                        <label style="font-size: small ;" for="subgroup">Subgrupo:</label>
                        <select class="custom-select custom-select-sm" id="subgroup" name="subgroup"
                            onchange="viewFile()" value="{{product.subgroup}}">
                            <option selected disabled value="">Selecione...</option>
                            {{#each subgroups}}
                            <option {{#if_eq ../product.subgroup _id}}selected{{/if_eq}} value="{{_id}}">{{description}}
                            </option>
                            {{else}}
                            <option value="0">Nenhum Subgroup registrado</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group col-12 col-md-12">
                        <label style="font-size: small ;" for="client">Site:</label>
                        <select class="custom-select custom-select-sm" id="client" name="client"
                            value="{{product.client}}">
                            <option selected disabled value="">Selecione...</option>
                            {{#each customers}}
                            <option {{#if_eq ../product.client _id}}selected{{/if_eq}} value="{{_id}}">{{description}}
                            </option>
                            {{else}}
                            <option value="0">Nenhum site registrado</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-md-4 position-static">
                <div class="form-row">
                    <div class="form-group col-12 col-md-12">
                        <label style="font-size: small ;" for="local">Locação:</label>
                        <select class="custom-select custom-select-sm" id="localArea" name="localArea"
                            value="{{product.localArea}}">
                            <option selected disabled value="">Selecione...</option>
                            {{#each rentalareas}}
                            <option {{#if_eq ../product.localArea _id}}selected{{/if_eq}} value="{{_id}}">
                                {{description}}
                            </option>
                            {{else}}
                            <option value="0">Nenhuma locação registrada</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group col-12 col-md-12">
                        <label style="font-size: small ;" for="local">Locação:</label>
                        <select class="custom-select custom-select-sm" id="local" name="local"
                            value="{{product.local}}">
                            <option selected disabled value="">Selecione...</option>
                            {{#each leases}}
                            <option {{#if_eq ../product.local _id}}selected{{/if_eq}} value="{{_id}}">{{description}}
                            </option>
                            {{else}}
                            <option value="0">Nenhuma locação registrada</option>
                            {{/each}}
                        </select>
                    </div>

                    <div class="form-group col-12 col-md-12">
                        <label style="font-size: small ;" for="sublease">Sublocação:</label>
                        <select class="custom-select custom-select-sm" id="sublease" name="sublease"
                            value="{{product.sublease}}">
                            <option selected disabled value="">Selecione...</option>
                            {{#each subleases}}
                            <option {{#if_eq ../product.sublease _id}}selected{{/if_eq}} value="{{_id}}">{{description}}
                            </option>
                            {{else}}
                            <option value="0">Nenhuma sublocação registrada</option>
                            {{/each}}
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <input type="hidden" class="form-control mt-2" name="fullDescription" id="fullDescription"
            placeholder="Descrição completa do Produto">

        <div class="form-row">
            <div class="form-group col-md-3">
                <label style="font-size: small ;" for="patrimonialAsset">Bem Patrimonial:</label>
                <input type="text" class="form-control form-control-sm" id="patrimonialAsset" name="patrimonialAsset"
                    placeholder="Bem Patrimonial" value="{{product.patrimonialAsset}}">
            </div>

            <div class="form-group col-md-9">
                <label style="font-size: small ;" for="description">Descrição:</label>
                <input type="text" class="form-control form-control-sm" id="description" name="description"
                    placeholder="Descrição do Produto" value="{{product.description}}">
            </div>

        </div>

        <div class="form-row">
            <div class="form-group col-md-3">
                <label style="font-size: small ;" for="manufacturer">Fabricante:</label>
                <input type="text" class="form-control form-control-sm" id="manufacturer" name="manufacturer"
                    placeholder="Fabricante do Produto" value="{{product.manufacturer}}">
            </div>

            <div class="form-group col-md-3">
                <label style="font-size: small ;" for="model">Modelo:</label>
                <input type="text" class="form-control form-control-sm" id="model" name="model"
                    placeholder="Modelo do Produto" value="{{product.model}}">
            </div>

            <div class="form-group col-md-4">
                <label style="font-size: small ;" for="capacityReach">Capacidade / Alcance:</label>
                <input type="text" class="form-control form-control-sm" id="capacityReach" name="capacityReach"
                    placeholder="Capacidade / Alcance do Produto" value="{{product.capacityReach}}">
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="serialNumber">N° de Série:</label>
                <input type="text" class="form-control form-control-sm" id="serialNumber" name="serialNumber"
                    placeholder="N° de série do Produto" value="{{product.serialNumber}}">
            </div>

        </div>

        <div class="form-row">
            <div class="form-group col-md-4">
                <label style="font-size: small ;" for="physicalStatus">Status:</label>
                <select class="custom-select custom-select-sm" id="physicalStatus" name="physicalStatus"
                    value="{{product.physicalStatus}}">
                    <option selected disabled value="">Selecione...</option>
                    {{#each status}}
                    <option {{#if_eq ../product.physicalStatus _id}}selected{{/if_eq}} value="{{_id}}">
                        {{description}}
                    </option>
                    {{else}}
                    <option value="0">Nenhum status registrado</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group col-md-4">
                <label style="font-size: small ;" for="kindOfEquipment">Tipo de Equipamento:</label>
                <select class="custom-select custom-select-sm" id="kindOfEquipment" name="kindOfEquipment"
                    value="{{product.kindOfEquipment}}">
                    <option selected disabled value="">Selecione...</option>
                    {{#each types}}
                    <option {{#if_eq ../product.kindOfEquipment _id}}selected{{/if_eq}} value="{{_id}}">
                        {{description}}
                    </option>
                    {{else}}
                    <option value="0">Nenhum tipo de equipamento registrado</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group col-md-4">
                <label style="font-size: small ;" for="requiresCertificationCalibration"> Requer
                    Calibração/Certificação:</label>
                <select class="custom-select custom-select-sm" id="requiresCertificationCalibration"
                    name="requiresCertificationCalibration" onchange="viewCertificate()">
                    <option value="{{product.requiresCertificationCalibration}}" selected>
                        {{product.requiresCertificationCalibration}}

                    </option>
                    <option value="Sim">Sim</option>
                    <option value="Não">Não</option>
                </select>
            </div>

        </div>

        <div class="form-row">

            <div class="form-group col-md-2" style="display: block;">
                <label style="font-size: small ;" for="inputAmount">Quantidade:</label>
                <input type="number" class="number form-control form-control-sm" id="inputAmount" name="inputAmount" step="0.01"
                    placeholder="Quantidade do Produto" value="{{product.inputAmount}}">
            </div>
            <div class="form-group col-md-2" style="display: none;">
                <label style="font-size: small ;" for="outputQuantity">Quantidade:</label>
                <input type="number" class="form-control form-control-sm" id="outputQuantity" name="outputQuantity"
                    step="0.01" placeholder="Quantidade do Produto" value="{{product.outputQuantity}}">
            </div>

            <div class="form-group col-md-3">
                <label style="font-size: small ;" for="unity">Unidade:</label>
                <select class="custom-select custom-select-sm" id="unity" name="unity" value="{{product.unity}}">
                    <option selected disabled value="">Selecione...</option>
                    {{#each unitys}}
                    <option {{#if_eq ../product.unity _id}}selected{{/if_eq}} value="{{_id}}">{{description}}
                    </option>
                    {{else}}
                    <option value="0">Nenhuma unidade de equipamento registrada</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="weightKg">Peso Kg:</label>
                <input type="number" class="number form-control form-control-sm" id="weightKg" name="weightKg" step="0.01"
                    placeholder="Peso do Produto" value="{{product.weightKg}}">
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="faceValue">Valor de Face:</label>
                <input type="number" class="number form-control form-control-sm" id="faceValue" name="faceValue"
                    placeholder="Valor do Produto" step="0.01" value="{{product.faceValue}}">
            </div>

            <div class="form-group col-md-3">
                <label style="font-size: small ;" for="dimensionsWxLxH">Dimensões LxCxA mm:</label>
                <input type="text" class="form-control form-control-sm" id="dimensionsWxLxH" name="dimensionsWxLxH"
                    placeholder="Dimensões do Produto" value="{{product.dimensionsWxLxH}}">
            </div>

        </div>

        <div class="certificate">
            <div class="form-row">

                <div class="form-group col-md-2">
                    <label style="font-size: small ;" for="certificate">Certificado:</label>
                    <input type="text" class="form-control form-control-sm" id="certificate" name="certificate"
                        placeholder="Certificado do Produto" value="{{product.certificate}}">
                </div>

                <div class="form-group col-md-2">
                    <label style="font-size: small ;" for="entityLaboratory">Laboratório/ Entidade:</label>
                    <input type="text" class="form-control form-control-sm" id="entityLaboratory"
                        name="entityLaboratory" placeholder="Laboratório/ Entidade"
                        value="{{product.entityLaboratory}}">
                </div>

                <div class="form-group col-md-2">
                    <label style="font-size: small ;" for="calibrationDate">Data Calibração:</label>
                    <input type="date" class="form-control form-control-sm" id="calibrationDate" name="calibrationDate"
                        placeholder="Data Calibração" value="{{product.calibrationDate}}" onchange="calculater();">
                </div>

                <div class="form-group col-md-2">
                    <label style="font-size: small ;" for="frequency">Periodicidade:</label>
                    <select class="custom-select custom-select-sm" id="frequency" name="frequency"
                        value="{{product.frequency}}" onchange="calculater();">
                        <option selected disabled value="">Selecione...</option>
                        {{#each breaks}}
                        <option {{#if_eq ../product.frequency _id}}selected{{/if_eq}} value="{{_id}}">
                            {{description}}
                        </option>
                        {{else}}
                        <option value="0">Nenhum intervalo registrado</option>
                        {{/each}}
                    </select>
                </div>

                <div class="form-group col-md-2">
                    <label style="font-size: small ;" for="calibrationValidity">Validade Calibração:</label>
                    <input type="date" class="form-control form-control-sm" id="calibrationValidity"
                        name="calibrationValidity" placeholder="Validade Calibração"
                        value="{{product.calibrationValidity}}">
                </div>

                <div class="form-group col-md-2">
                    <label style="font-size: small ;" for="calibrationStatus">Status Calibração:</label>
                    <input type="text" class="form-control form-control-sm" id="calibrationStatus"
                        name="calibrationStatus" placeholder="Status Calibração">
                </div>

            </div>

        </div>

        <div class="form-row">

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="po">P.O.:</label>
                <input type="text" class="form-control form-control-sm" id="po" name="po" placeholder="P.O. do Produto"
                    value="{{product.po}}">
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="sapCode">Código Sap:</label>
                <input type="text" class="form-control form-control-sm" id="sapCode" name="sapCode"
                    placeholder="Código Sap" value="{{product.sapCode}}">
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="ncmCode">Código Ncm:</label>
                <input type="text" class="form-control form-control-sm" id="ncmCode" name="ncmCode"
                    placeholder="Código Ncm" value="{{product.ncmCode}}">
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="provider">Fornecedor:</label>
                <select class="custom-select custom-select-sm" id="provider" name="provider"
                    value="{{product.provider}}">
                    <option selected disabled value="">Selecione...</option>
                    {{#each providers}}
                    <option {{#if_eq ../product.provider _id}}selected{{/if_eq}} value="{{_id}}">{{name}}
                    </option>
                    {{else}}
                    <option value="0">Nenhum Fornecedor registrado</option>
                    {{/each}}
                </select>
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="invoce">Nota Fiscal:</label>
                <input type="text" class="form-control form-control-sm" id="invoce" name="invoce"
                    placeholder="Nota Fiscal" value="{{product.invoce}}">
            </div>

            <div class="form-group col-md-2">
                <label style="font-size: small ;" for="receivingDate">Data Recebimento:</label>
                <input type="date" class="form-control form-control-sm" id="receivingDate" name="receivingDate"
                    placeholder="Data Recebimento" value="{{product.receivingDate}}">
            </div>

        </div>

        <div class="form-row">
            <div class="form-group col-md-11">
                <label style="font-size: small ;" for="note">Observações:</label>
                <input type="text" class="form-control form-control-sm" id="note" name="note"
                    placeholder="Observações sobre o produto" value="{{product.note}}">
            </div>
            <!--VERIFICANDO DE O ITEM É ATIVO-->
            <input type="hidden" class="form-control mt-2" name="activeStatus" id="activeStatus">
            <!--CONTROLE DE USUÁRIOS LANÇAMENTO DO MATERIAL-->
            <input type="hidden" class="form-control mt-2" id="releaseDateOf" name="releaseDateOf" placeholder="date"
                value="{{#formatDate date}}{{/formatDate}}">
            <input type="hidden" class="form-control mt-2" name="userLaunch" id="userLaunch" value="{{user.name}}">
            <input type="hidden" class="form-control mt-2" name="emailLaunch" id="emailLaunch" value="{{user.email}}">
            <!--CONTROLE DE USUÁRIOS LANÇAMENTO DO MATERIAL-->
            <input type="hidden" class="form-control mt-2" id="editionDate" name="editionDate" placeholder="date"
                value="{{#formatDate date}}{{/formatDate}}">
            <input type="hidden" class="form-control mt-2" name="userEdtion" id="userEdtion" value="{{user.name}}">
            <input type="hidden" class="form-control mt-2" name="emailEdtion" id="emailEdtion" value="{{user.email}}">

            <div class="form-group col-md-1 mt-1">
                <br>
                <button type="submit" class="btn btn-success btn-block btn-sm">Salvar <i class="fas fa-share"></i></button>
            </div>

        </div>
        <hr>

    </form>

</div>