<div class="container mt-2">
  <script>
    function navigate(offset) {
      var searchParams = new URLSearchParams(location.search);
      const page = Number(searchParams.get("page")) || 1;
      searchParams.set("page", page + offset);
      location.search = searchParams.toString();
    }

    function search() {
      var searchParams = new URLSearchParams(location.search);
      const search = document.getElementById('search').value;
      searchParams.set("search", search);
      location.search = searchParams.toString();
    }

  </script>
  <h2>Produtos</h2>
  
  <div class="d-flex">
    <div class="mr-auto p-2">
      <a href="/products/products/add"><button class="btn btn-success">Novo <i class="fa fa-paper-plane" aria-hidden="true"></i></button></a>
    </div>

    <div class="p-2">

      <a href="/products/products"><button type="button" class="btn btn-primary">Lista <i
            class="fas fa-th-list"></i></button></a>


      <a href="/products/productstables"><button type="button" class="btn btn-primary">Tabela <i
            class="fas fa-table"></i></button></a>
    </div>
  </div>

  <hr>

  <div class="d-flex">
        <div class=" p-2">
      <input type="text" class="form-control" id="search" name="search" placeholder="Pesquise aqui..."
        onchange="this.value=this.value.toLowerCase()">
    </div>
        <div class="p-2">
      <button type="button" class="btn btn-primary" onclick="search()"><i class="fa fa-search"
          aria-hidden="true"></i></button>
    </div>
  </div>

  <hr>

  <!--VIZULIZAÇÃO EM LISTA-->
  <div id="card" class="card-deck mt-2" style='display: block;'>
    {{#each products}}
    <h5>{{fullDescription}}</h5>
    <div class="row no-gutters position-relative">
  <div class="col-md-3 mb-md-0 p-md-4">
  <img src="{{image}}" style="width: 12rem;" class="rounded mr-3" alt="...">
 </div> 
      <div class="col-md-6 position-static p-4 pl-md-0">

        
        <h6 class="card-text">Grupo: {{group.description}}</h6>
        <h6 class="card-text">Subgrupo: {{subgroup.description}}</h6>


         
        <a href="/products/products/add_id/{{_id}}" class="btn btn-primary btn-sm" data-toggle="tooltip"
          data-placement="bottom" title="Criar novo produto a partir dessas informações">
          <i class="fa fa-paper-plane" aria-hidden="true"></i></a>

        <a href="/products/products/take/{{_id}}" class="btn btn-dark btn-sm" data-toggle="tooltip"
          data-placement="bottom" title="Visualizar detalhes">
          <i class="fas fa-align-right"></i></a>

        <a href="/products/products/edit/{{_id}}" class="btn btn-secondary btn-sm" data-toggle="tooltip"
          data-placement="bottom" title="Ediar Produto">
          <i class="fas fa-pen"></i></button></a>

        <a href="/products/products/delete/{{_id}}" class="deletar btn btn-danger btn-sm" data-toggle="tooltip"
          data-placement="bottom" title="Deletar Produto">
          <i class="fas fa-trash-alt"></i></a>

      </div>
    </div>
    <hr>
    {{else}}
    <h4 class="mt-12 mb-2">Nenhum Produto Registrado!</h4>
    {{/each}}

    <div class="d-flex">
      <div class="mr-auto p-2">
        {{#if prev }}
        <button class="btn btn-primary btn-sm mt-2" onclick="navigate(-1)">
          <i class="fa fa-arrow-left" aria-hidden="true"></i> Anterior</button>
        {{/if}}
      </div>
      <div class="p-2">
        {{#if next }}
        <button class="btn btn-primary btn-sm mt-2" onclick="navigate(1)">Próximo
          <i class="fa fa-arrow-right" aria-hidden="true"></i></button>
        {{/if}}
      </div>
    </div>

  </div>
</div>